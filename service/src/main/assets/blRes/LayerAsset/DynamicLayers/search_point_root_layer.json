{
  "data": {
    "type": "adaptor_point",
    "brief": "搜索父POI点图层数据，value是测试数据",
    "value": [],
    "rule": [
      {
        "brief": "额外优先级",
        "type": "data_priority_if",
        "value": {
          "condition": {
            "fact": "$biz_data.poiType",
            "operator": "equal",
            "value": 1
          },
          "case": {
            "true": 2000000,
            "false": {
              "if": {
                "condition": {
                  "all": [
                    {
                      "fact": "$biz_data.poiType",
                      "operator": "equal",
                      "value": 0
                    },
                    {
                      "fact": "$biz_data.typeCode",
                      "operator": "in",
                      "value": [10101,10102,10103]
                    }
                  ]
                },
                "case": {
                  "true": 1000000
                }
              }
            }
          }
        }
      },
      {
        "brief": "图元下标字符串",
        "type": "data_user_func",
        "value": {
          "biz_data": "user_item_index_str",
          "func": {
            "name": "Int2String",
            "param": {
              "value": "$biz_data.index"
            }
          }
        }
      },
      {
        "brief": "用户数据：图元ID整型",
        "type": "data_user_func",
        "value": {
          "biz_data": "user_item_id_int",
          "func": {
            "name": "String2Int",
            "param": {
              "value": "$biz_data.itemID"
            }
          }
        }
      },
      {
        "brief": "用户数据：图元ID整型+1",
        "type": "data_user_func",
        "value": {
          "biz_data": "user_item_id_int_plus_1",
          "func": {
            "name": "DataAdd",
            "param": {
              "addValue": "$biz_data.user_item_id_int",
              "augValue": 1
            }
          }
        }
      },
      {
        "brief": "用户数据：图元ID+1字符串",
        "type": "data_user_func",
        "value": {
          "biz_data": "user_item_id_plus_1_str",
          "func": {
            "name": "Int2String",
            "param": {
              "value": "$biz_data.user_item_id_int_plus_1"
            }
          }
        }
      }
    ]
  },
  "biz": [
    {
      "brief": "清除所有图元",
      "type": "biz_clear_all_items"
    },
    {
      "brief": "设置是否可点击",
      "type": "biz_set_clickable",
      "value": true
    },
    {
      "brief": "设置图元优先级是否升序",
      "type": "biz_item_priority_asc",
      "value": true
    },
    {
      "brief": "设置是否开启底图避让",
      "type": "biz_is_poi_filter",
      "value": {
        "enable": true,
        "type": 4294967295
      }
    }
  ],
  "style": {
    "style_name": {
      "prefix_name": "",
      "rule": [
        {
          "brief": "获取样式文件",
          "type": "style_if",
          "value": {
            "condition": {
              "fact": "$biz_data.poiType",
              "operator": "equal",
              "value": 0
            },
            "case": {
              "true": {
                "switch": {
                  "condition": "$biz_data.typeCode",
                  "case": {
                    "10101": "point_search_alongroute_gas_10101",
                    "10102": "point_search_alongroute_gas_10102",
                    "10103": "point_search_alongroute_gas_10103",
                    "default": "point_search_alongroute_gas_default"
                  }
                }
              },
              "false": {
                "if": {
                  "condition": {
                    "fact": "$biz_data.poiType",
                    "operator": "equal",
                    "value": 1
                  },
                  "case": {
                    "true": {
                      "if": {
                        "condition": {
                          "all": [
                            {
                              "fact": "$biz_data.deepInfo.type",
                              "operator": "equal",
                              "value": 1
                            },
                            {
                              "fact": "$biz_data.deepInfo.discount",
                              "operator": "gt",
                              "value": 0.0
                            }
                          ]
                        },
                        "case": {
                          "true": {
                            "if": {
                              "condition": {
                                "fact": "$biz_data.deepInfo.is_discount",
                                "operator": "equal",
                                "value": true
                              },
                              "case": {
                                "true": "point_search_alongroute_gas_discounts_deep_info_red",
                                "false": "point_search_alongroute_gas_discounts_deep_info"
                              }
                            }
                          },
                          "false": {
                            "if": {
                              "condition": {
                                "any": [
                                  {
                                    "fact": "$biz_data.typeCode",
                                    "operator": "equal",
                                    "value": 10101
                                  },
                                  {
                                    "fact": "$biz_data.deepInfo.type_code",
                                    "operator": "equal",
                                    "value": 10101
                                  }
                                ]
                              },
                              "case": {
                                "true": "point_search_alongroute_gas_discounts_10101",
                                "false": {
                                  "if": {
                                    "condition": {
                                      "any": [
                                        {
                                          "fact": "$biz_data.typeCode",
                                          "operator": "equal",
                                          "value": 10102
                                        },
                                        {
                                          "fact": "$biz_data.deepInfo.type_code",
                                          "operator": "equal",
                                          "value": 10102
                                        }
                                      ]
                                    },
                                    "case": {
                                      "true": "point_search_alongroute_gas_discounts_10102",
                                      "false": {
                                        "if": {
                                          "condition": {
                                            "any": [
                                              {
                                                "fact": "$biz_data.typeCode",
                                                "operator": "equal",
                                                "value": 10103
                                              },
                                              {
                                                "fact": "$biz_data.deepInfo.type_code",
                                                "operator": "equal",
                                                "value": 10103
                                              }
                                            ]
                                          },
                                          "case": {
                                            "true": "point_search_alongroute_gas_discounts_10103",
                                            "false": "point_search_alongroute_gas_discounts"
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "false": {
                      "if": {
                        "condition": {
                          "fact": "$biz_data.poiType",
                          "operator": "equal",
                          "value": 2
                        },
                        "case": {
                          "true": {
                            "if": {
                              "condition": {
                                "all": [
                                  {
                                    "fact": "$biz_data.deepInfo.type",
                                    "operator": "equal",
                                    "value": 2
                                  },
                                  {
                                    "fact": "$biz_data.deepInfo.current_price",
                                    "operator": "gt",
                                    "value": 0
                                  }
                                ]
                              },
                              "case": {
                                "true": "point_search_parent_car_wash_deep_info",
                                "false": "point_search_parent_car_wash"
                              }
                            }
                          },
                          "false": {
                            "if": {
                              "condition": {
                                "fact": "$biz_data.poiType",
                                "operator": "equal",
                                "value": 3
                              },
                              "case": {
                                "true": "point_search_parent_delicious_food",
                                "false": {
                                  "if": {
                                    "condition": {
                                      "fact": "$biz_data.poiType",
                                      "operator": "equal",
                                      "value": 5
                                    },
                                    "case": {
                                      "true": "point_search_parent_scenic_spot",
                                      "false": {
                                        "if": {
                                          "condition": {
                                            "fact": "$biz_data.poiType",
                                            "operator": "equal",
                                            "value": 6
                                          },
                                          "case": {
                                            "true": {
                                              "if": {
                                                "condition": {
                                                  "fact": "$biz_data.deepInfo.type",
                                                  "operator": "equal",
                                                  "value": 6
                                                },
                                                "case": {
                                                  "true": {
                                                    "if": {
                                                      "condition": {
                                                        "all": [
                                                          {
                                                            "fact": "$biz_data.deepInfo.num_fast",
                                                            "operator": "gt",
                                                            "value": 0
                                                          },
                                                          {
                                                            "fact": "$biz_data.deepInfo.num_slow",
                                                            "operator": "gt",
                                                            "value": 0
                                                          }
                                                        ]
                                                      },
                                                      "case": {
                                                        "true": "point_search_parent_charge_station_deep_info_2",
                                                        "false": {
                                                          "if": {
                                                            "condition": {
                                                              "any": [
                                                                {
                                                                  "fact": "$biz_data.deepInfo.num_fast",
                                                                  "operator": "gt",
                                                                  "value": 0
                                                                },
                                                                {
                                                                  "fact": "$biz_data.deepInfo.num_slow",
                                                                  "operator": "gt",
                                                                  "value": 0
                                                                }
                                                              ]
                                                            },
                                                            "case": {
                                                              "true": "point_search_parent_charge_station_deep_info",
                                                              "false": "point_search_parent_charge_station"
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  },
                                                  "false": "point_search_parent_charge_station"
                                                }
                                              }
                                            },
                                            "false": {
                                              "if": {
                                                "condition": {
                                                  "fact": "$biz_data.index",
                                                  "operator": "ge",
                                                  "value": 0
                                                },
                                                "case": {
                                                  "true": {
                                                    "if": {
                                                      "condition": {
                                                        "fact": "$biz_data.index",
                                                        "operator": "gt",
                                                        "value": 0
                                                      },
                                                      "case": {
                                                        "true": {
                                                          "func": {
                                                            "name": "DataAdd",
                                                            "param": {
                                                              "addValue": "point_search_parent",
                                                              "augValue": "$biz_data.user_item_index_str"
                                                            }
                                                          }
                                                        },
                                                        "false": "point_search_parent_no_number"
                                                      }
                                                    }
                                                  },
                                                  "false": {
                                                    "func": {
                                                      "name": "DataAdd",
                                                      "param": {
                                                        "addValue": "point_search_parent",
                                                        "augValue": "$biz_data.user_item_id_plus_1_str"
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      ]
    },
    "dynamic_marker": {
      "rule": [
        {
          "brief": "按类型更新样式",
          "type": "marker_switch",
          "value": {
            "condition": "$biz_data.poiType",
            "case": {
              "1": [
                {
                  "if": {
                    "condition": {
                      "all": [
                        {
                          "fact": "$biz_data.deepInfo.type",
                          "operator": "equal",
                          "value": 1
                        },
                        {
                          "fact": "$biz_data.deepInfo.discount",
                          "operator": "unequal",
                          "value": 0
                        }
                      ]
                    },
                    "case": {
                      "true": {
                        "id": "id_price",
                        "nodeName": "label",
                        "display": true,
                        "value": [
                          {
                            "format": "%.2f",
                            "value": "$biz_data.deepInfo.discount"
                          }
                        ]
                      }
                    }
                  }
                },
                {
                  "if": {
                    "condition": {
                      "all": [
                        {
                          "fact": "$biz_data.deepInfo.type",
                          "operator": "equal",
                          "value": 1
                        },
                        {
                          "fact": "$biz_data.deepInfo.is_discount",
                          "operator": "equal",
                          "value": true
                        }
                      ]
                    },
                    "case": {
                      "true": {
                        "id": "div_discount",
                        "nodeName": "div",
                        "display": true
                      },
                      "false": {
                        "id": "div_discount",
                        "nodeName": "div"
                      }
                    }
                  }
                }
              ],
              "2": {
                "if": {
                  "condition": {
                    "all": [
                      {
                        "fact": "$biz_data.deepInfo.type",
                        "operator": "equal",
                        "value": 2
                      },
                      {
                        "fact": "$biz_data.deepInfo.current_price",
                        "operator": "gt",
                        "value": 0
                      }
                    ]
                  },
                  "case": {
                    "true": {
                      "id": "id_price",
                      "nodeName": "label",
                      "display": true,
                      "value": "$biz_data.deepInfo.current_price"
                    }
                  }
                }
              },
              "6": [
                {
                  "if": {
                    "condition": {
                      "all": [
                        {
                          "fact": "$biz_data.deepInfo.type",
                          "operator": "equal",
                          "value": 6
                        },
                        {
                          "fact": "$biz_data.deepInfo.num_fast",
                          "operator": "gt",
                          "value": 0
                        }
                      ]
                    },
                    "case": {
                      "true": [
                        {
                          "id": "div_fast",
                          "nodeName": "div",
                          "display": true
                        },
                        {
                          "id": "id_fast_count",
                          "nodeName": "label",
                          "display": true,
                          "value": "$biz_data.deepInfo.num_fast"
                        }
                      ],
                      "false": {
                        "id": "div_fast",
                        "nodeName": "div",
                        "display": false
                      }
                    }
                  }
                },
                {
                  "if": {
                    "condition": {
                      "all": [
                        {
                          "fact": "$biz_data.deepInfo.type",
                          "operator": "equal",
                          "value": 6
                        },
                        {
                          "fact": "$biz_data.deepInfo.num_slow",
                          "operator": "gt",
                          "value": 0
                        }
                      ]
                    },
                    "case": {
                      "true": [
                        {
                          "id": "div_slow",
                          "nodeName": "div",
                          "display": true
                        },
                        {
                          "id": "id_slow_count",
                          "nodeName": "label",
                          "display": true,
                          "value": "$biz_data.deepInfo.num_slow"
                        }
                      ],
                      "false": {
                        "id": "div_slow",
                        "nodeName": "div",
                        "display": false
                      }
                    }
                  }
                },
                {
                  "if": {
                    "condition": {
                      "all": [
                        {
                          "fact": "$biz_data.deepInfo.type",
                          "operator": "equal",
                          "value": 6
                        },
                        {
                          "fact": "$biz_data.deepInfo.num_fast",
                          "operator": "gt",
                          "value": 0
                        },
                        {
                          "fact": "$biz_data.deepInfo.num_slow",
                          "operator": "gt",
                          "value": 0
                        }
                      ]
                    },
                    "case": {
                      "true": {
                        "id": "div_padding",
                        "nodeName": "div",
                        "display": true
                      },
                      "false": {
                        "id": "div_padding",
                        "nodeName": "div",
                        "display": false
                      }
                    }
                  }
                }
              ]
            }
          }
        },
        {
          "brief": "更新search_parent_name_div",
          "type": "marker_if",
          "value": {
            "marker_id": "search_parent_name.xml",
            "condition": {
              "func": {
                "name": "StringLength",
                "param": {
                  "value": "$biz_data.poiName"
                }
              },
              "operator": "gt",
              "value": 0
            },
            "case": {
              "true": [
                {
                  "id": "search_parent_name",
                  "nodeName": "div",
                  "display": true
                },
                {
                  "id": "name_text",
                  "nodeName": "label",
                  "display": true,
                  "value": "$biz_data.poiName"
                }
              ],
              "false": {
                "id": "search_parent_name",
                "nodeName": "div",
                "display": false
              }
            }
          }
        },
        {
          "brief": "更新search_alongroute_name_div",
          "type": "marker_if",
          "value": {
            "marker_id": "search_alongroute_name.xml",
            "condition": {
              "func": {
                "name": "StringLength",
                "param": {
                  "value": "$biz_data.poiName"
                }
              },
              "operator": "gt",
              "value": 0
            },
            "case": {
              "true": [
                {
                  "id": "search_alongroute_name",
                  "nodeName": "div",
                  "display": true
                },
                {
                  "id": "name_text",
                  "nodeName": "label",
                  "display": true,
                  "value": "$biz_data.poiName"
                }
              ],
              "false": {
                "id": "search_alongroute_name",
                "nodeName": "div",
                "display": false
              }
            }
          }
        },
        {
          "brief": "image_key_discount_gas",
          "type": "marker_switch",
          "value": {
            "marker_id": "search_parent_discount_gas.xml",
            "condition": "$biz_data.deepInfo.type_code",
            "case": {
              "10101": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_sinopec_station_icon_day_night"
              },
              "10102": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_petrochina_station_icon_day_night"
              },
              "10103": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_shell_station_icon_day_night"
              },
              "default": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_gas_station_icon_day_night"
              }
            }
          }
        },
        {
          "brief": "image_key_discount_gas_red",
          "type": "marker_switch",
          "value": {
            "marker_id": "search_parent_discount_gas_red.xml",
            "condition": "$biz_data.deepInfo.type_code",
            "case": {
              "10101": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_sinopec_station_icon_day_night"
              },
              "10102": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_petrochina_station_icon_day_night"
              },
              "10103": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_shell_station_icon_day_night"
              },
              "default": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_gas_station_icon_day_night"
              }
            }
          }
        },
        {
          "brief": "image_key_discount_gas_focus",
          "type": "marker_switch",
          "value": {
            "marker_id": "search_parent_discount_gas_focus.xml",
            "condition": "$biz_data.deepInfo.type_code",
            "case": {
              "10101": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_sinopec_station_big_icon_day_night"
              },
              "10102": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_petrochina_station_big_icon_day_night"
              },
              "10103": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_shell_station_big_icon_day_night"
              },
              "default": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_gas_station_big_icon_day_night"
              }
            }
          }
        },
        {
          "brief": "image_key_discount_gas_red_focus",
          "type": "marker_switch",
          "value": {
            "marker_id": "search_parent_discount_gas_red_focus.xml",
            "condition": "$biz_data.deepInfo.type_code",
            "case": {
              "10101": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_sinopec_station_big_icon_day_night"
              },
              "10102": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_petrochina_station_big_icon_day_night"
              },
              "10103": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_shell_station_big_icon_day_night"
              },
              "default": {
                "id": "brand_image",
                "nodeName": "image",
                "display": true,
                "value": "global_image_navi_along_search_gas_station_big_icon_day_night"
              }
            }
          }
        }
      ]
    }
  },
  "abstract": {
    "brief": "搜索父POI点图层",
    "name": "search_point_root_layer",
    "biz_type": 7004,
    "update_card": false
  },
  "dataSource": "[{\"item_data\":{\"position\":{\"lon\":116.356796,\"lat\":39.939559,\"z\":0}},\"biz_data\":{\"poiType\":6,\"typeCode\":0,\"index\":0,\"text\":\"\",\"itemID\":\"$sys_data.bizLayer.layerItem.id\",\"poiName\":\"测试名_0\",\"markerBGRes\":\"\",\"deepInfo\":{\"type\":6,\"type_code\":0,\"discount\":10.6,\"is_discount\":true,\"current_price\":48,\"num_fast\":8,\"num_slow\":4}}},{\"item_data\":{\"position\":{\"lon\":116.3577960000475,\"lat\":39.9405590000475,\"z\":0}},\"biz_data\":{\"poiType\":6,\"typeCode\":0,\"index\":0,\"text\":\"\",\"itemID\":\"$sys_data.bizLayer.layerItem.id\",\"poiName\":\"测试名_0\",\"markerBGRes\":\"\",\"deepInfo\":{\"type\":6,\"type_code\":0,\"discount\":10.6,\"is_discount\":true,\"current_price\":48,\"num_fast\":8,\"num_slow\":4}}}]"
}